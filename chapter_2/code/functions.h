#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void fatal(char*);
void* ec_malloc(unsigned int);

void fatal(char *message) {
    char error_message[1000];

    strcpy(error_message, "[!!] Fatal Error ");
    strncat(error_message, message, 83); // Message has to be at most 83 characters(100 - the fatal error message length)
    perror(error_message);
    exit(-1);
}

void* ec_malloc(unsigned int size) {
    void* ptr = malloc(size);
    if (ptr == NULL) 
        fatal("in ec_malloc() on memory allocation");
    
    return ptr;
}
